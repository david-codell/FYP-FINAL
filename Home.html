<!DOCTYPE html>
<html style="font-size: 16px;" lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <meta name="keywords"
    content="Global, ​Music, Your club name, dance, Festival, ​Our Night Club, ​&nbsp;Latests Events, Vatos Locos and Friends Friday 5.26, II Points x Secret Project – May 1st, Jean Pierre’s Wynwood Remix, ​Next Level Entertainment, Themusicshow, ​The best DJ&amp;apos;s and Musicians, ​Tonight Special Party&nbsp; &nbsp; Booking Available">
  <meta name="description" content="">
  <title>Home</title>
  <link rel="stylesheet" href="nicepage.css" media="screen">
  <link rel="stylesheet" href="Home.css" media="screen">
  <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
  <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
  <meta name="generator" content="Nicepage 5.20.7, nicepage.com">
  <link id="u-theme-google-font" rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
  <link id="u-page-google-font" rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700,700i|Abril+Fatface:400">











  <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "",
		"logo": "images/logo-svg.svg"
}</script>
  <meta name="theme-color" content="#478ac9">
  <meta property="og:title" content="Home">
  <meta property="og:type" content="website">
  <meta data-intl-tel-input-cdn-path="intlTelInput/">
</head>

<body data-path-to-root="./" data-include-products="false" class="u-body u-xl-mode" data-lang="en">
  <header class="u-clearfix u-header u-header" id="sec-f0f4">
    <div class="u-clearfix u-sheet u-sheet-1">
      <a href="https://nicepage.com" class="u-image u-logo u-image-1" data-image-width="150" data-image-height="150">
        <img src="images/logo-svg.svg" class="u-logo-image u-logo-image-1">
      </a>
      <nav class="u-menu u-menu-dropdown u-offcanvas u-menu-1">
        <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px;">
          <a class="u-button-style u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
            href="#">
            <svg class="u-svg-link" viewBox="0 0 24 24">
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use>
            </svg>
            <svg class="u-svg-content" version="1.1" id="menu-hamburger" viewBox="0 0 16 16" x="0px" y="0px"
              xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
              <g>
                <rect y="1" width="16" height="2"></rect>
                <rect y="7" width="16" height="2"></rect>
                <rect y="13" width="16" height="2"></rect>
              </g>
            </svg>
          </a>
        </div>
        <div class="u-custom-menu u-nav-container">
          <ul class="u-nav u-unstyled u-nav-1">
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                href="Home.html" style="padding: 10px 20px;">Home</a>
            </li>
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                href="egViewAllEvents.html" style="padding: 10px 20px;">Events</a>
            </li>
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                href="Contact.html" style="padding: 10px 20px;">Contact</a>
            </li>
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                href="egAccountDetails.html" style="padding: 10px 20px;">Account</a>
            </li>

            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                style="padding: 10px 20px;" href="Login.html">Logout</a>
            </li>
          </ul>
        </div>
        <div class="u-custom-menu u-nav-container-collapse">
          <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
            <div class="u-inner-container-layout u-sidenav-overflow">
              <div class="u-menu-close"></div>
              <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-3">
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Home.html">Home</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="egViewAllEvents.html">Events</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Contact.html">Contact</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="egAccountDetails.html">Account</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="login.html">Logout</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
        </div>
      </nav>
    </div>
  </header>
  <section class="u-clearfix u-image u-valign-middle u-section-1" id="carousel_255a" data-image-width="1620"
    data-image-height="1080">
    <h2 class="u-custom-font u-text u-text-default u-text-1" style="color: #ffffff;"> Promos just for you!</h2>
    <div class="data-layout-selected u-clearfix u-expanded-width u-layout-wrap u-layout-wrap-1">
      <div id="marketingContainer" class="u-list u-repeater u-white u-list-1"></div>
    </div>
  </section>
  <section class="u-align-center u-clearfix u-palette-5-base u-section-2" id="carousel_b1bd">
    <div class="u-clearfix u-sheet u-valign-middle-sm u-valign-middle-xs u-sheet-1">
      <h2 class="u-custom-font u-text u-text-default u-text-1"> Event Categories</h2>
      <p class="u-text u-text-2"> Music Festivals&nbsp;&nbsp;<span class="u-file-icon u-icon u-text-white u-icon-1"><img
            src="images/481037-16a84870.png" alt=""></span>&nbsp; Sports Events&nbsp;<span
          class="u-file-icon u-icon u-text-white u-icon-2"><img src="images/481037-16a84870.png" alt=""></span>&nbsp;
        Concerts&nbsp;<span class="u-file-icon u-icon u-text-white u-icon-3"><img src="images/481037-16a84870.png"
            alt=""></span>&nbsp; Carnivals<span class="u-file-icon u-icon u-text-white u-icon-4"><img
            src="images/481037-16a84870.png" alt=""></span>&nbsp; Business Conferences&nbsp;<span
          class="u-file-icon u-icon u-text-white u-icon-5"><img src="images/481037-16a84870.png"
            alt=""></span>&nbsp;&nbsp;
      </p>
    </div>
  </section>
  <section class="u-align-center u-clearfix u-palette-5-dark-3 u-section-3" id="carousel_3a7f">
    <div class="u-clearfix u-sheet u-sheet-1">
      <div class="u-repeater u-repeater-1" id="event-container">
        <h1 class="u-custom-font u-text u-text-1"><span class="u-icon"></span>&nbsp;Latests <span
            style="font-style: italic;">Events</span></h1>
        <!-- Populated events will go here -->
      </div>
      <br><br>
    </div>
  </section>
  <section class="u-align-left u-clearfix u-image u-section-4" id="carousel_10e9" data-image-width="1104"
    data-image-height="1080">
    <div class="u-clearfix u-sheet u-sheet-1">
      <div class="u-align-right u-container-style u-expanded-width-sm u-expanded-width-xs u-group u-group-1">
        <div class="u-container-layout u-container-layout-1">
          <h3 class="u-custom-font u-text u-text-body-alt-color u-text-font u-text-1">Festivals &amp; Shows</h3>
          <h1 class="u-custom-font u-text u-text-body-alt-color u-title u-text-2">
            <a href="https://mim.org/galleries/special-exhibitions/the-electric-guitar-inventing-an-american-icon/"
              ping="/url?sa=t&amp;source=web&amp;rct=j&amp;url=https://mim.org/galleries/special-exhibitions/the-electric-guitar-inventing-an-american-icon/&amp;ved=2ahUKEwjL-aj21PXlAhWhw6YKHYk3CGIQFjALegQIABAB"
              style="">The<br>m
            </a>usic<span style="font-style: italic;">
              <br>show
            </span>
            <br>
          </h1>
          <a href="https://nicepage.cloud"
            class="u-border-none u-btn u-button-style u-palette-5-base u-text-body-alt-color u-btn-1">buy ticket</a>
        </div>
      </div>
    </div>
  </section>
  <section class="u-align-center u-clearfix u-palette-5-dark-3 u-section-5" id="carousel_d671">
    <h2 class="u-custom-font u-text u-text-default u-text-1">Host Your Events With Us Today!</h2>
    <div class="u-clearfix u-expanded-width u-layout-wrap u-layout-wrap-1">
      <div class="u-layout">
        <div class="u-layout-row">
          <div class="u-container-style u-image u-layout-cell u-left-cell u-size-15 u-size-30-md u-image-1"
            data-image-width="720" data-image-height="1080">
            <div class="u-container-layout"></div>
          </div>
          <div class="u-container-style u-image u-layout-cell u-size-15 u-size-30-md u-image-2">
            <div class="u-container-layout"></div>
          </div>
          <div class="u-container-style u-image u-layout-cell u-size-15 u-size-30-md u-image-3" data-image-width="1617"
            data-image-height="1080">
            <div class="u-container-layout"></div>
          </div>
          <div class="u-container-style u-image u-layout-cell u-right-cell u-size-15 u-size-30-md u-image-4">
            <div class="u-container-layout"></div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="u-clearfix u-section-6" id="carousel_afbd">
    <div class="u-clearfix u-expanded-width u-layout-wrap u-layout-wrap-1">
      <div class="u-layout">
        <div class="u-layout-row">
          <div class="u-align-left u-container-style u-image u-layout-cell u-left-cell u-size-40 u-image-1">
            <div class="u-container-layout u-container-layout-1"></div>
          </div>
          <div class="u-align-center u-container-style u-image u-layout-cell u-right-cell u-size-20 u-image-2">
            <div class="u-container-layout u-valign-top u-container-layout-2"></div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="u-align-center u-clearfix u-palette-5-dark-3 u-section-7" id="carousel_41ad">
    <div class="u-clearfix u-sheet u-sheet-1">
      <h2 class="u-custom-font u-text u-text-1">
        <span style="font-style: italic;">&nbsp;</span>
        <span class="u-text-palette-5-base">Business Enquiries</span>
      </h2>
      <p class="u-text u-text-2">Register with us today to experience a seamless process of hosting your events today!
      </p>
    </div>
  </section>




  <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-209f">
    <div class="u-clearfix u-sheet u-sheet-1">

    </div>
  </footer>
  <section class="u-backlink u-clearfix u-grey-80">


    <p class="u-text">
      <span>SellOut 2023 Copyright</span>
    </p>

  </section>
  <script src="config.js"></script>
  <!-- Include jQuery from a CDN (example) -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    var today = new Date();
    today.setHours(0, 0, 0, 0); // Set the time to the beginning of the day for comparison.

    var sessionemail = sessionStorage.getItem("email")

    function getUserDetails() {
      return new Promise((resolve, reject) => {
        fetch(categoryUrls[currentEnvironment]["user"] + "getByEmail2?email=" + sessionemail)
          .then(response => {
            if (!response.ok) {
              throw new Error('Request failed with status: ' + response.status);
            }
            return response.json();
          })
          .then(response => {
            if (response.code === 200) {
              var user_details = response.data[0];
              console.log("EventGoer Details: " + JSON.stringify(user_details));
              sessionStorage.setItem("eventGoerId", user_details.eventGoerId);
              console.log("Event Goer Id: " + sessionStorage.getItem("eventGoerId"));
              resolve();
            } else {
              console.error("Error: " + response.message);
              reject(response.message);

            }
          })
          .catch(error => {
            console.error("Request failed: " + error);
            reject(error);
          });
      });
    }

    function getUserPreference() {
      getUserDetails().then(() => {
        var eventGoerId = sessionStorage.getItem("eventGoerId");
        $.get(categoryUrls[currentEnvironment]["preference"] + "getPreferenceByEventGoerId?eventGoerId=" + eventGoerId, function (response) {
          if (response.code === 200) {
            var preferences = response.data;
            console.log("Preference: " + JSON.stringify(preferences));
            var InterestArray = preferences.map(function (preference) {
              return preference.categoryId;
            });
            console.log("Category Id: " + JSON.stringify(InterestArray));
          }

          // Call populateFeaturedEvent for each categoryId in InterestArray
          InterestArray.forEach(function (categoryId) {
            populateFeaturedEvent(categoryId);
          });
        });
      });
    }

    // For Each preference, Get Event By Category
    function populateFeaturedEvent(categoryId) {
      $.get(categoryUrls[currentEnvironment]["event"] + "getByCategoryId?categoryId=" + categoryId, function (response) {
        if (response.code === 200) {
          var events = JSON.parse(JSON.stringify(response.data));
          console.log("Events for categoryId " + categoryId + ": " + JSON.stringify(events));

          // Create an array to store the extracted venueIds
          var venueIds = [];

          // Loop through each event and extract the venueId
          events.forEach(function (event) {
            if (event.venueId) {
              venueIds.push(event.venueId);
            }
          });

          // Now, the venueIds array contains all the venueIds from the events
          console.log("Venue IDs: " + JSON.stringify(venueIds));

          // Sort events by eventDateTime
          events.sort(function (a, b) {
            return new Date(a.eventDateTime) - new Date(b.eventDateTime);
          });
          console.log(events);

          var eventContainer = document.getElementById("event-container");

          // Loop through the events and create event cards
          events.forEach(function (event) {
            var venueId = event.venueId;

            // Call getVenueDetails for each venueId
            getVenueDetails(venueId, function (venue) {
              var eventDate = new Date(event.eventDateTime);
              // Call getMarketingPoster for each eventId
              var eventLink = "egViewEvent.html?eventId=" + event.eventId + "&venueId=" + venueId + "&categoryId=" + event.categoryId;

              const imageUrl = "https://firebasestorage.googleapis.com/v0/b/fyp2023-s3-03.appspot.com/o/events%2F" + event.img + "?alt=media";


              // Check if the event is upcoming or current
              if (eventDate > today) {
                // Event is upcoming
                var eventHtml = `
    <div class="u-container-style u-list-item u-repeater-item">
        <div class="u-container-layout u-similar-container u-container-layout-1">
          <img src="${imageUrl}" alt="" class="u-image u-image-default u-preserve-proportions u-image-1">
          <h2 class="u-custom-font u-text u-text-2">${event.eventName}</h2>
          <h5 class="u-custom-font u-font-pt-sans u-text u-text-3">${event.eventDateTime}</h5>
          <h5 class="u-custom-font u-font-pt-sans u-text u-text-3">${venue.venueName}</h5>
          <a href="${eventLink}" class="u-active-white u-border-none u-btn u-button-style u-hover-white u-palette-1-base u-text-active-palette-5-dark-3 u-text-body-alt-color u-text-hover-palette-5-dark-3 u-btn-1">more</a>
        </div>
      </div>
    `;

                eventContainer.innerHTML += eventHtml;
              } else {
                // Event is current
                var eventHtml = `
    <div class="u-container-style u-list-item u-repeater-item">
        <div class="u-container-layout u-similar-container u-container-layout-1">
          <img src="${imageUrl}" alt="" class="u-image u-image-default u-preserve-proportions u-image-1">
          <h2 class="u-custom-font u-text u-text-2">${event.eventName}</h2>
          <h5 class="u-custom-font u-font-pt-sans u-text u-text-3">${event.eventDateTime}</h5>
          <h5 class="u-custom-font u-font-pt-sans u-text u-text-3">${venue.venueName}</h5>
          <a href="${eventLink}" class="u-active-white u-border-none u-btn u-button-style u-hover-white u-palette-1-base u-text-active-palette-5-dark-3 u-text-body-alt-color u-text-hover-palette-5-dark-3 u-btn-1">more</a>
        </div>
      </div>
    `;
                // Append to a different container for current events
                // Append the event HTML to the container
                eventContainer.innerHTML += eventHtml;
              }

            });
          });
        } else {
          console.error("Failed to retrieve event data.");
        }

      });
    }

    function populateEvents(eventsData) {
      // Get the event container element
      var eventContainer = document.getElementById("event-container");

      // Iterate through the first 4 events in the data and populate them
      for (let i = 0; i < Math.min(4, eventsData.length); i++) {
        var event = eventsData[i];
        var eventHtml = `
    <div class="u-container-style u-list-item u-repeater-item">
        <div class="u-container-layout u-similar-container u-container-layout-1">
          <img src="${event.img}" alt="" class="u-image u-image-default u-preserve-proportions u-image-1">
          <h2 class="u-custom-font u-text u-text-2">${event.eventName}</h2>
          <h5 class="u-custom-font u-font-pt-sans u-text u-text-3">${event.eventDateTime}</h5>
          <a href="${event.link}" class="u-active-white u-border-none u-btn u-button-style u-hover-white u-palette-1-base u-text-active-palette-5-dark-3 u-text-body-alt-color u-text-hover-palette-5-dark-3 u-btn-1">more</a>
        </div>
      </div>
    `;

        // Append the event HTML to the container
        eventContainer.innerHTML += eventHtml;
      }
    }

    // For each event, get venue details using Venue Id
    function getVenueDetails(venueId, callback) {
      $.get(categoryUrls[currentEnvironment]["venue"] + "getVenueById?venueId=" + venueId, function (response) {
        if (response.code === 200) {
          var venue = response.data[0];
          console.log("Venue details: " + JSON.stringify(venue));
          console.log("Venue Name: " + venue.venueName);
          // Call the callback function with the venue data
          callback(venue);
        }
      });
    }

    // For each event, get venue details using Venue Id
    function getEventDetails(eventId, callback) {
      $.get(categoryUrls[currentEnvironment]["event"] + "getEventById?eventId=" + eventId, function (response) {
        if (response.code === 200) {
          var event = response.data[0];
          console.log("Marketing event details: " + JSON.stringify(event));
          console.log("Event Name: " + event.eventName);
          // Call the callback function with the venue data
          callback(event);
        }
      });
    }

    function getMarketingPoster(callback) {
      $.get(categoryUrls[currentEnvironment]["marketing"] + "getAll", function (response) {
        if (response.code === 200) {
          var marketingData = response.data;

          marketingData.forEach(function (marketing) {
            console.log("Marketing data: " + JSON.stringify(marketing));

            var currentImgFileName = marketing.img;
            const imageUrl = "https://firebasestorage.googleapis.com/v0/b/fyp2023-s3-03.appspot.com/o/marketing%2F" + currentImgFileName + "?alt=media";
            getEventDetails(marketing.eventId, function (event) {
              // Call getMarketingPoster for each eventId
              var eventLink = "egViewEvent.html?eventId=" + event.eventId + "&venueId=" + event.venueId + "&categoryId=" + event.categoryId;
           
              var marketingHtml = `
            <div class="u-container-style u-list-item u-repeater-item" style=" flex: 0 0 auto; margin-right: 10px; box-sizing: border-box; width: calc(33.33% - 10px); margin: 0 5px 5px 0; box-sizing: border-box;    border: black solid 1px;">
              <div class="u-container-layout u-similar-container u-container-layout-1" style="height: 100%;">
                <img src="${imageUrl}" alt="" class="u-image u-image-default u-preserve-proportions u-image-1" style=" width: 100%; height: 500px; object-fit: cover; max-height: 600px;     ">
                <h2 class="u-custom-font u-text u-text-2" style="font-size: 2em; color: ivory;">${marketing.eventName}</h2>
                <h5 class="u-custom-font u-font-pt-sans u-text u-text-3" style="font-size: 1em; margin: 6px 0 0;color: ivory;">${event.eventDateTime}</h5>
                <a href="${eventLink}" class="u-active-white u-border-none u-btn u-button-style u-hover-white u-palette-1-base u-text-active-palette-5-dark-3 u-text-body-alt-color u-text-hover-palette-5-dark-3 u-btn-1">more</a>
              </div>
            </div>
          `;


              // Append the marketing HTML to the container
              $("#marketingContainer").append(marketingHtml)
            });
          });
        } else {
          // Handle other errors here
          console.error("An error occurred:", response);
        }
      });
    }



    getMarketingPoster();
    getUserDetails();
    getUserPreference();


  </script>
</body>

</html>