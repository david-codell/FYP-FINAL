<!DOCTYPE html>
<html style="font-size: 16px;" lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <meta name="keywords"
    content="DJ Night, Latests Events, Vatos Locos and Friends Friday 5.26, II Points x Secret Project – May 1st, Jean Pierre’s Wynwood Remix, Biography, DJ Night is Your Best Choice For Luxury Destination Weddings, Private, and Corporate Events, About Me, Contact Us">
  <meta name="description" content="">
  <title>egViewVenueCategories</title>
  <link rel="stylesheet" href="nicepage.css" media="screen">
  <link rel="stylesheet" href="egViewVenueCategories.css" media="screen">
  <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
  <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
  <meta name="generator" content="Nicepage 5.20.7, nicepage.com">
  <link id="u-theme-google-font" rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">




  <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "",
		"logo": "images/logo-svg.svg"
}</script>
  <meta name="theme-color" content="#478ac9">
  <meta property="og:title" content="egViewVenueCategories">
  <meta property="og:type" content="website">
  <meta data-intl-tel-input-cdn-path="intlTelInput/">
</head>

<body data-path-to-root="./" data-include-products="false" class="u-body u-xl-mode" data-lang="en">
  <header class="u-clearfix u-header u-header" id="sec-f0f4">
    <div class="u-clearfix u-sheet u-sheet-1">
      <a href="https://nicepage.com" class="u-image u-logo u-image-1" data-image-width="150" data-image-height="150">
        <img src="images/logo-svg.svg" class="u-logo-image u-logo-image-1">
      </a>
      <nav class="u-menu u-menu-dropdown u-offcanvas u-menu-1">
        <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px;">
          <a class="u-button-style u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
            href="#">
            <svg class="u-svg-link" viewBox="0 0 24 24">
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use>
            </svg>
            <svg class="u-svg-content" version="1.1" id="menu-hamburger" viewBox="0 0 16 16" x="0px" y="0px"
              xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
              <g>
                <rect y="1" width="16" height="2"></rect>
                <rect y="7" width="16" height="2"></rect>
                <rect y="13" width="16" height="2"></rect>
              </g>
            </svg>
          </a>
        </div>
        <div class="u-custom-menu u-nav-container">
          <ul class="u-nav u-unstyled u-nav-1">
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                href="Home.html" style="padding: 10px 20px;">Home</a>
            </li>
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                href="egViewAllEvents.html" style="padding: 10px 20px;">Events</a>
            </li>
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                href="Contact.html" style="padding: 10px 20px;">Contact</a>
            </li>
            <li class="u-nav-item"><a
              class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
              href="egAccountDetails.html" style="padding: 10px 20px;">Account</a>
          </li>
           
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                style="padding: 10px 20px;" href="Login.html">Logout</a>
            </li>
          </ul>
        </div>
        <div class="u-custom-menu u-nav-container-collapse">
          <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
            <div class="u-inner-container-layout u-sidenav-overflow">
              <div class="u-menu-close"></div>
              <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-3">
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Home.html">Home</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="egViewAllEvents.html">Events</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Contact.html">Contact</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="egAccountDetails.html">Account</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Login.html ">Logout</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
        </div>
      </nav>
    </div>
  </header>
  
  <section class="u-clearfix u-section-1" id="sec-457f">
    <div class="u-clearfix u-sheet u-sheet-1">
      <div >
        <div class="u-container-layout u-container-layout-1">
          <div class="labels">
            <div style="align-items: center;">
              <div style="padding: 0;" class="u-container-layout u-container-layout-2">
                <p
                  style="font-family: 'Segoe UI Light'; text-align: center; font-size: 80px; text-transform: uppercase ; margin: 0; text-align: top;"
                  id="eventName"></p><br>
                  <h4 style="margin: 0;">Event Description</h4>
                <label id="eventDescription"></label><br><br>
                <h4 style="margin: 0;">Event Details</h4>
                <label id="eventDateTime">DateTime</label><br><br>

                <h4 style="margin: 0;" >Venue Details</h4>
                <a style="margin: 0;" id="venueName"></a><br><br>
                <h4 style="margin: 0;">Categories Available</h4>
                <p style="margin: 0;">Select from the list below</p>
                
              </div>
            </div>
          </div>
          
          <!-- Div for image -->
          <div class="image-container">
            <img src="" id="currentImg" alt="Your Image" 
            style="max-width: 600px; max-height: 600px;min-width: 600px; min-height: 600px;"/>
          </div>
          
          
        </div>
        <div class="custom-expanded u-table u-table-responsive">
          <table id="venuebookingTable" class="u-table-entity">

            <thead class="u-palette-4-base u-table-header u-table-header-1">
              <tr style="height: 46px;">
                <th class="u-border-1 u-border-palette-4-base u-table-cell">Category</th>
                <th class="u-border-1 u-border-palette-4-base u-table-cell">Price </th>
                <th class="u-border-1 u-border-palette-4-base u-table-cell">Capacity </th>
                <th class="u-border-1 u-border-palette-4-base u-table-cell">Status </th>
                <th class="u-border-1 u-border-palette-4-base u-table-cell">Action</th>
              </tr>
            </thead>
            <tbody class="u-table-body">

            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>




  <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-209f">
    <div class="u-clearfix u-sheet u-sheet-1">
      <p class="u-small-text u-text u-text-variant u-text-1">Sample text. Click to select the Text Element.</p>
    </div>
  </footer>
  <section class="u-backlink u-clearfix u-grey-80">
    <a class="u-link" href="https://nicepage.com/website-design" target="_blank">
      <span>Website Design</span>
    </a>
    <p class="u-text">
      <span>created with</span>
    </p>
    <a class="u-link" href="https://nicepage.studio" target="_blank">
      <span>Best Free Website Builder</span>
    </a>.
  </section>

</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="config.js"></script>
<script>
  $(document).ready(function () {
    const queryParams = new URLSearchParams(window.location.search);
    const eventidfromURL = queryParams.get("eventId");
    console.log(eventidfromURL);
    const queryParams1 = new URLSearchParams(window.location.search);
    const venueidfromURL = queryParams1.get("venueId");
    console.log(venueidfromURL);
    $.ajax({
      type: "GET",
      url: categoryUrls[currentEnvironment]["event"] + "getEventById?eventId=" + eventidfromURL,
      dataType: "json",
      success: function (response) {
        if (response.code === 200) {
          var event = response.data[0];

          var eventDateTime = new Date(event.eventDateTime);
          var formattedEventDateTime = eventDateTime.toISOString().slice(0, 19).replace('T', ' ');

          // Parse and format the dateEnd
          var launchedDateTime = new Date(event.eventLaunchedDate);
          var formattedEventLaunchedDate = launchedDateTime.toISOString().slice(0, 19).replace('T', ' ');

          // Populate the form fields with event data
          $("#categoryId").val(event.categoryId);
          $("#eventName").text(event.eventName);
          console.log("Event Name:", event.eventName);
          $("#eventDateTime").text("Time and Date : "+formattedEventDateTime);
          $("#eventDescription").text(event.eventDescription);
          $("#eventLaunchedDate").val(formattedEventLaunchedDate);
          
        } else {
          console.error("Failed to fetch event data.", response.message);
        }
      },
      error: function (xhr, status, error) {
        console.error("Error fetching event data:", error);
      }
    });

    //-------------------VENUE--------------------------------
    var initialVenueId = parseInt(venueidfromURL);


    $.ajax({
      type: "GET",
      url: categoryUrls[currentEnvironment]["venue"] + "getVenueById?venueId=" + initialVenueId,
      dataType: "json",
      success: function (selectedVenueResponse) {
        if (selectedVenueResponse.code === 200) {
          var selectedVenue = selectedVenueResponse.data[0];
          // Populate the venueId field
          $("#venueName").text("Venue Name : "+ selectedVenue.venueName);
          $("#capacity").val(selectedVenue.capacity);
          $("#postalcode").text("Postal Code: " + selectedVenue.postalcode);
          $("#address1").text("Address: " + selectedVenue.address1 + " " + selectedVenue.address2);
          var currentImgFileName = selectedVenue.img;
          const imageUrl = "https://firebasestorage.googleapis.com/v0/b/fyp2023-s3-03.appspot.com/o/venue%2F" + currentImgFileName + "?alt=media";
          $("#currentImg").attr("src", imageUrl);
        } else {
          console.error("Failed to fetch selected venue data.", selectedVenueResponse.message);
        }
      },
      error: function (xhr, status, error) {
        console.error("Error fetching selected venue data:", error);
      }
    });
    $.ajax({
      type: "GET",
      url: categoryUrls[currentEnvironment]["booking"] + "venuebooking/getVenueCatByEventId?eventId=" + eventidfromURL,
      dataType: "json",
      success: function (response) {
        if (response.code === 200) {
          var venuebooking = response.data;

          // Loop through the user data and populate the table rows
          var tableBody = $("#venuebookingTable tbody");
          for (var i = 0; i < venuebooking.length; i++) {
            var venuebookingData = venuebooking[i];
            var row = $("<tr >");
            row.append($("<td style='padding:0px;'>").text(venuebookingData.venuebookingId).hide());  
            row.append($("<td style='padding:0px;'>").text(venuebookingData.cat));
            row.append($("<td style='padding:0px;'>").text("$" + venuebookingData.catPrice));
            row.append($("<td style='padding:0px;'>").text(venuebookingData.capacity));
            row.append($("<td >").text(venuebookingData.status));
            var button = $("<button style='width:100%;  margin:0px;' class='u-btn u-button-style u-btn-1'>").text("SELECT");
            button.on("click", function () {

              var venuebookingId = $(this).closest("tr").find("td:eq(0)").text();
              // Redirect to another page and pass the email as a query parameter
              window.location.href = "egBookingDetails.html?venuebookingId=" + venuebookingId;
            });
            // Add more table cells for other user attributes
            // Add a button to each row   
            row.append($("<td style='padding:0px;'>").append(button));

            tableBody.append(row);
          }
        } else {
          // Handle error or empty response
          console.error("Failed to fetch user data.");
        }
      },
      error: function (error) {
        console.error("Error fetching user data:", error);
      }
    });
  });
</script>

</html>