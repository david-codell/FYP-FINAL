<!DOCTYPE html>
<html style="font-size: 16px;" lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <meta name="keywords"
    content="Sign up and get fresh loot for popular games plus more, Our Story, Innovation in the gameindustry, Sign up and get fresh loot for popular games plus more, Game Gadgets, Download games and play free games every month.">
  <meta name="description" content="">
  <title>adminViewEventGoer</title>
  <link rel="stylesheet" href="nicepage.css" media="screen">
  <link rel="stylesheet" href="adminViewEventGoer.css" media="screen">
  <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
  <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
  <meta name="generator" content="Nicepage 5.20.7, nicepage.com">
  <link id="u-theme-google-font" rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">




  <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "",
		"logo": "images/logo-svg.svg"
}</script>
  <meta name="theme-color" content="#478ac9">
  <meta property="og:title" content="adminViewEventGoer">
  <meta property="og:type" content="website">
  <meta data-intl-tel-input-cdn-path="intlTelInput/">
</head>

<body data-path-to-root="./" data-include-products="false" class="u-body u-xl-mode" data-lang="en">
  <header class="u-clearfix u-header u-header" id="sec-f0f4">
    <div class="u-clearfix u-sheet u-sheet-1">
      <a href="https://nicepage.com" class="u-image u-logo u-image-1" data-image-width="150" data-image-height="150">
        <img src="images/logo-svg.svg" class="u-logo-image u-logo-image-1">
      </a>
      <nav class="u-menu u-menu-dropdown u-offcanvas u-menu-1">
        <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px;">
          <a class="u-button-style u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
            href="#">
            <svg class="u-svg-link" viewBox="0 0 24 24">
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use>
            </svg>
            <svg class="u-svg-content" version="1.1" id="menu-hamburger" viewBox="0 0 16 16" x="0px" y="0px"
              xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
              <g>
                <rect y="1" width="16" height="2"></rect>
                <rect y="7" width="16" height="2"></rect>
                <rect y="13" width="16" height="2"></rect>
              </g>
            </svg>
          </a>
        </div>
        <div class="u-custom-menu u-nav-container">
          <ul class="u-nav u-unstyled u-nav-1">
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                href="adminDashboard.html" style="padding: 10px 20px;">Home</a>
            </li>
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                href="adminViewAllUsers.html" style="padding: 10px 20px;">Users</a>
                <div class="u-nav-popup">
                  <ul class="u-h-spacing-20 u-nav u-unstyled u-v-spacing-10">
                    <li class="u-nav-item"><a class="u-button-style u-nav-link u-white" href="adminViewSuspendedEventOrganizer.html">Suspended Event Organizers</a>
                    </li>
                    <li class="u-nav-item"><a class="u-button-style u-nav-link u-white"  href="adminViewNewEventOrganizers.html">New Event Orgainzer Sign Ups</a>
                    </li>
                  </ul>
                </div>
            </li>
            
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                href="adminViewAllCategory.html" style="padding: 10px 20px;">Category</a>
                <div class="u-nav-popup">
                  <ul class="u-h-spacing-20 u-nav u-unstyled u-v-spacing-10">
                    <li class="u-nav-item"><a class="u-button-style u-nav-link u-white" href="adminCreateCategory.html">Create Category</a>
                    </li>
                  </ul>
                </div>
            </li>
            <li class="u-nav-item"><a
              class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
              href="adminViewAllVenue.html" style="padding: 10px 20px;">Venues</a>
              <div class="u-nav-popup">
                <ul class="u-h-spacing-20 u-nav u-unstyled u-v-spacing-10">
                  <li class="u-nav-item"><a class="u-button-style u-nav-link u-white" href="adminCreateVenue.html">Create Venue</a>
                  </li>
                </ul>
              </div>
          </li>
          
            

            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                style="padding: 10px 20px;" href="Login.html">Logout</a>
            </li>
          </ul>
        </div>
        <div class="u-custom-menu u-nav-container-collapse">
          <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
            <div class="u-inner-container-layout u-sidenav-overflow">
              <div class="u-menu-close"></div>
              <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-3">
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="adminDashboard.html">Home</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="adminViewAllUsers.html">Users</a>
                  <div class="u-nav-popup">
                    <ul class="u-h-spacing-20 u-nav u-unstyled u-v-spacing-10">
                      <li class="u-nav-item"><a class="u-button-style u-nav-link" href="adminViewSuspendedEventOrganizers.html">Suspended Event Organizers</a>
                      </li>
                      <li class="u-nav-item"><a class="u-button-style u-nav-link"  href="adminViewNewEventOrganizer.html">New Event Orgainzer Sign Ups</a>
                      </li>
                    </ul>
                  </div>
                </li>
                
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="adminViewAllCategory.html">Category</a>
                  <div class="u-nav-popup">
                    <ul class="u-h-spacing-20 u-nav u-unstyled u-v-spacing-10">
                      <li class="u-nav-item"><a class="u-button-style u-nav-link" href="adminCreateCategory.html">Create Category</a>
                      </li>
                     
                    </ul>
                  </div>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="adminViewAllVenue.html">Venues</a>
                  <div class="u-nav-popup">
                    <ul class="u-h-spacing-20 u-nav u-unstyled u-v-spacing-10">
                      <li class="u-nav-item"><a class="u-button-style u-nav-link" href="adminCreateVenue.html">Create Venue</a>
                      </li>
                      
                    </ul>
                  </div>

                </li>
                
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Login.html ">Logout</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
        </div>
      </nav>
    </div>
  </header>
  <section style="background-color:#040e2d ;" class="u-clearfix u-custom-color-1 u-section-1" id="carousel_9569">
    <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
      <div class="data-layout-selected u-clearfix u-expanded-width u-layout-wrap u-layout-wrap-1">
        <div class="u-layout">
          <div class="u-layout-col">
            <div class="u-size-60">
              <div class="u-layout-col">
                <div class="u-align-center u-container-style u-layout-cell u-size-60 u-layout-cell-1">
                  <div class="u-container-layout u-container-layout-1">
                    <h2 style="color:white" class="u-align-left u-text u-text-1">Event Goer Details</h2>
                    <div class="u-clearfix u-custom-html u-custom-html-1">
                      <style></style>
                      <form id="userForm" style="text-align:left;">
                        <label style="color:white" for="eventGoerId">Event Goer ID:</label>
                        <input type="text" id="eventGoerId" name="eventGoerId">
                        <br>
                        <label style="color:white" for="userId"> User ID:</label>
                        <input type="text" id="userId" name="userId">
                        <br>
                        <label style="color:white" for="emailtext">Email:</label>
                        <input type="text" id="emailtext" name="email">
                        <br>
                        <label style="color:white" for="fname">First Name:</label>
                        <input type="text" id="fname" name="fname">
                        <br>
                        <label style="color:white" for="lname">Last Name:</label>
                        <input type="text" id="lname" name="lname">
                        <br>
                        <label style="color:white" for="dob">Date Of Birth:</label>
                        <input type="text" id="dob" name="dob">
                        <br>
                        <label style="color:white" for="phone">Phone:</label>
                        <input type="text" id="phone" name="phone">
                        <br>
                        <label style="color:white" for="country">Country:</label>
                        <input type="text" id="country" name="country">
                        <br>
                        <label style="color:white" style="color:white" for="postalCode">Postal Code:</label>
                        <input type="text" id="postalCode" name="postalCode">
                        <br>
                        <label style="color:white" for="address1">Address 1:</label>
                        <input type="text" id="address1" name="address1">
                        <br>
                        <label style="color:white" for="address2">Address 2:</label>
                        <input type="text" id="address2" name="address2">
                        <br><!-- Add more input fields for other user attributes -->
                        <button class="u-btn u-button-style u-btn-1" id="update">Update</button>
                      </form>

                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>




  <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-209f">
    <div class="u-clearfix u-sheet u-sheet-1">
      <p class="u-small-text u-text u-text-variant u-text-1">Sample text. Click to select the Text Element.</p>
    </div>
  </footer>
  <section class="u-backlink u-clearfix u-grey-80">
    <a class="u-link" href="https://nicepage.com/templates" target="_blank">
      <span>Templates</span>
    </a>
    <p class="u-text">
      <span>created with</span>
    </p>
    <a class="u-link" href="" target="_blank">
      <span>Offline Website Builder</span>
    </a>.
  </section>

</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  // JavaScript code here
  $(document).ready(function () {

    // Fetch the user type from the session
    var userType = sessionStorage.getItem("user_type");
    console.log(userType)
    //var sessionemail = sessionStorage.getItem("email");
    //console.log(email);
    if (userType !== "1") {
      // User is not an admin, redirect to another page or show an error message
      window.location.href = "/accessdenied.html"; // Replace with your access denied page
    } else {
      //var emailLabel = document.getElementById("email");
      //emailLabel.textContent = sessionemail;
      //console.log(emailLabel.textContent);
      const queryParams = new URLSearchParams(window.location.search);
      const emailfromUrl = queryParams.get("email");
      const decodedemail = emailfromUrl.replace(/%40/g, "@");
      console.log(decodedemail);
      var urllink = "https://warm-forest-43784-0f02215b714a.herokuapp.com/getByEmail2?email=" + decodedemail;
      //var urllink = "/fyp/user/getByEmail2?email=" + decodedemail;
      // Fetch user data and populate the table
      $.ajax({
        type: "GET",
        url: urllink,
        dataType: "json",
        success: function (response) {
          if (response.code === 200) {
            var user = response.data[0]; // Assuming there is only one user in the response

            // Populate the form fields with user data
            $("#eventGoerId").val(user.eventGoerId);
            $("#userId").val(user.userId);
            $("#emailtext").val(user.email);
            console.log("Email:", user.email);
            $("#fname").val(user.fname);
            $("#lname").val(user.lname);
            $("#dob").val(user.dob);
            $("#phone").val(user.phone);
            $("#country").val(user.country);
            $("#postalCode").val(user.postal_code);
            $("#address1").val(user.address1);
            $("#address2").val(user.address2);
            console.log("Address 2:", user.address2);


            // Add more code here to populate other form fields if needed
            // Handle the "View User" button click


          } else {
            // Handle error or empty response
            console.error("Failed to fetch user data.");
          }
        },
        error: function (error) {
          console.error("Error fetching user data:", error);
        }
      });

    }
  });
  $("#userForm").on("submit", async function (e) {
    e.preventDefault();
    var updatedEventGoerId = $("#eventGoerId").val();
    var updatedUserId = $("userId").val();
    var updatedEmailtext = $("#emailtext").val();
    var updatedFname = $("#fname").val();
    var updatedLname = $("#lname").val();
    var updatedDob = $("#dob").val();
    var updatedCountry = $("#country").val();
    var updatedPostalcode = $("#postalCode").val();
    var updatedAddress1 = $("#address1").val();
    var updatedAddress2 = $("#address2").val();

    // Create a JSON object with all the fields to update
    var updatedData = {
      eventGoerId: updatedEventGoerId,
      userId: updatedUserId,
      email: updatedEmailtext,
      fname: updatedFname,
      lname: updatedLname,
      dob: updatedDob,
      country: updatedCountry,
      postal_code: updatedPostalcode,
      address1: updatedAddress1,
      address2: updatedAddress2
    };
    try {
      const response = await $.ajax({
        type: "POST",
        url: 'https://warm-forest-43784-0f02215b714a.herokuapp.com/updateEventGoerById',
        data: JSON.stringify(updatedData),
        contentType: 'application/json',
      });
      if (response) {
        // Handle success response
        console.log(response);
        alert("Event goer Updated successfully!");
        window.location.href = "adminViewAllUsers.html"
      }
    } catch (error) {
      // Handle error response
      console.error(error);
    }

    /*$.ajax({
      type: "POST",
      url: 'https://warm-forest-43784-0f02215b714a.herokuapp.com/updateEventGoerById',
      //url: '/fyp/user/updateEventGoerById',
      contentType: 'application/json',
      data: JSON.stringify(updatedData),
      success: function (response) {
        if (response.code === 200) {
          // Update was successful, display a success message
          console.log("success");
          alert("Event goer Updated successfully!");
          window.location.href = "adminViewAllUsers.html";
        } else {
          // Handle the case where the update failed
          $("#message").text("Failed to update EventGoer data.");
        }
      },
      error: function (error) {
        // Handle AJAX request failure
        $("#message").text("Error updating EventGoer data: " + error.responseText);
      }
    });*/

  });
</script>

</html>