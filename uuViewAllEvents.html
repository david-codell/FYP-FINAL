<!DOCTYPE html>
<html style="font-size: 16px;" lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <meta name="keywords"
    content="DJ Night, Latests Events, Vatos Locos and Friends Friday 5.26, II Points x Secret Project – May 1st, Jean Pierre’s Wynwood Remix, Biography, DJ Night is Your Best Choice For Luxury Destination Weddings, Private, and Corporate Events, About Me, Contact Us">
  <meta name="description" content="">
  <title>uuViewAllEvents</title>
  <link rel="stylesheet" href="nicepage.css" media="screen">
  <link rel="stylesheet" href="uuViewAllEvents.css" media="screen">
  <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
  <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
  <meta name="generator" content="Nicepage 5.20.7, nicepage.com">
  <meta name="referrer" content="origin">
  <link id="u-theme-google-font" rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
  <link id="u-page-google-font" rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700,700i">






  <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "",
		"logo": "images/logo-svg.svg"
}</script>
  <meta name="theme-color" content="#478ac9">
  <meta property="og:title" content="uuViewAllEvents">
  <meta property="og:type" content="website">
  <meta data-intl-tel-input-cdn-path="intlTelInput/">
</head>

<body data-path-to-root="./" data-include-products="false" class="u-body u-xl-mode" data-lang="en">
  <header class="u-clearfix u-header u-header" id="sec-f0f4">
    <div class="u-clearfix u-sheet u-sheet-1">
      <a href="https://nicepage.com" class="u-image u-logo u-image-1" data-image-width="150" data-image-height="150">
        <img src="images/logo-svg.svg" class="u-logo-image u-logo-image-1">
      </a>
      <nav class="u-menu u-menu-dropdown u-offcanvas u-menu-1">
        <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px;">
          <a class="u-button-style u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
            href="#">
            <svg class="u-svg-link" viewBox="0 0 24 24">
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use>
            </svg>
            <svg class="u-svg-content" version="1.1" id="menu-hamburger" viewBox="0 0 16 16" x="0px" y="0px"
              xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
              <g>
                <rect y="1" width="16" height="2"></rect>
                <rect y="7" width="16" height="2"></rect>
                <rect y="13" width="16" height="2"></rect>
              </g>
            </svg>
          </a>
        </div>
        <div class="u-custom-menu u-nav-container">
          <ul class="u-nav u-unstyled u-nav-1">
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                href="index.html" style="padding: 10px 20px;">Home</a>
            </li>
            <li class="u-nav-item"><a
              class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
              href="uuViewAllEvents.html" style="padding: 10px 20px;">Events</a>
          </li>
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                href="About.html" style="padding: 10px 20px;">About</a>
            </li>
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                href="Contact.html" style="padding: 10px 20px;">Contact</a>
            </li>
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                style="padding: 10px 20px;">Register</a>
                <div class="u-nav-popup">
                  <ul class="u-h-spacing-20 u-nav u-unstyled u-v-spacing-10">
                    <li class="u-nav-item"><a class="u-button-style u-nav-link u-white" href="egRegister.html">Event Goer</a>
                    </li>
                    <li class="u-nav-item"><a class="u-button-style u-nav-link u-white" href="eoRegister.html">Business</a>
                    </li>
                  </ul>
                </div>
            </li>
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                style="padding: 10px 20px;" href="Login.html">Login</a>
            </li>
          </ul>
        </div>
        <div class="u-custom-menu u-nav-container-collapse">
          <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
            <div class="u-inner-container-layout u-sidenav-overflow">
              <div class="u-menu-close"></div>
              <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-3">
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="index.html">Home</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="uuViewAllEvents.html">Events</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="About.html">About</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Contact.html">Contact</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link">Register</a>
                  <div class="u-nav-popup">
                    <ul class="u-h-spacing-20 u-nav u-unstyled u-v-spacing-10">
                      <li class="u-nav-item"><a class="u-button-style u-nav-link u-white" href="egRegister.html">Event Goer</a>
                      </li>
                      <li class="u-nav-item"><a class="u-button-style u-nav-link u-white" href="eoRegister.html">Business</a>
                      </li>
                    </ul>
                  </div>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Login.html">Login</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
        </div>
      </nav>
    </div>
  </header>
  <section class="u-clearfix u-section-1" id="sec-457f">
    <div class="u-clearfix u-sheet u-sheet-1">
      <div class="data-layout-selected u-clearfix u-expanded-width u-layout-wrap u-layout-wrap-1">
        <div class="u-layout">
          <div class="u-layout-row">
            <div class="u-container-style u-image u-layout-cell u-size-30 u-image-1" data-image-width="800"
              data-image-height="827">
              <div class="u-container-layout u-container-layout-1"></div>
            </div>
            <div class="u-align-left u-container-style u-layout-cell u-size-30 u-layout-cell-2">
              <div class="u-container-layout u-container-layout-2">
                <h1 class="u-text u-title u-text-1">EVENTS</h1>
                <h5 class="u-text u-text-body-color u-text-2">All Events Happening Currently&nbsp;</h5>
                <form action="#" method="get"
                  class="u-border-1 u-border-grey-30 u-expanded-width u-search u-search-left u-white u-search-1">
                  <button class="u-search-button" type="submit">
                    <span class="u-search-icon u-spacing-10">
                      <svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 56.966 56.966">
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-94f0"></use>
                      </svg>
                      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                        id="svg-94f0" x="0px" y="0px" viewBox="0 0 56.966 56.966"
                        style="enable-background:new 0 0 56.966 56.966;" xml:space="preserve" class="u-svg-content">
                        <path
                          d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z">
                        </path>
                      </svg>
                    </span>
                  </button>
                  <!--input class="u-search-input" type="search" name="search" value="" placeholder="Search"-->
                  <input type="text" id="search-input" placeholder="Search by Event Name">

                </form>
                <a href="https://nicepage.com/c/slider-html-templates" class="u-btn u-button-style u-btn-1">Search</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="u-clearfix u-palette-5-dark-3 u-section-2" style="overflow: hidden;">
    <div class="u-clearfix u-sheet u-sheet-1">
      <h1 class="u-text u-text-1">Latest Events</h1>
      <div class="u-expanded-width u-layout-grid u-list u-list-1">
        <div class="u-repeater u-repeater-1">

        </div>
        <div class="pagination">
          <button id="prevPageButton" class="page-button" disabled>Previous</button>
          <span id="currentPage">Page 1</span>
          <button id="nextPageButton" class="page-button">Next</button>
        </div>
      </div>
    </div>
  </section>
  <section class="u-align-center u-clearfix u-palette-2-base u-section-3" id="sec-1e96">
    <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
      <h1 class="u-text u-text-1">Contact Us</h1>
      <p class="u-text u-text-2">
        <a href="https://nicepage.com/website-builder"
          class="u-active-none u-border-1 u-border-no-left u-border-no-right u-border-no-top u-border-white u-btn u-button-link u-button-style u-hover-none u-none u-text-body-alt-color u-btn-1">Soundcloud</a>&nbsp;
        &nbsp; <a href="https://nicepage.com/c/product-list-website-templates"
          class="u-active-none u-border-1 u-border-no-left u-border-no-right u-border-no-top u-border-white u-btn u-button-link u-button-style u-hover-none u-none u-text-body-alt-color u-btn-2">Instagram</a>&nbsp;
        &nbsp; <a href="https://nicepage.com/c/gallery-website-templates"
          class="u-active-none u-border-1 u-border-no-left u-border-no-right u-border-no-top u-border-white u-btn u-button-link u-button-style u-hover-none u-none u-text-body-alt-color u-btn-3">Twitter&nbsp;&nbsp;</a>
      </p>
      <div class="u-form u-form-1">
        <form action="https://forms.nicepagesrv.com/v2/form/process"
          class="u-clearfix u-form-horizontal u-form-spacing-10 u-inner-form" style="padding: 10px" source="email"
          name="form">
          <div class="u-form-email u-form-group">
            <label for="email-3b9a" class="u-form-control-hidden u-label" wfd-invisible="true">Email</label>
            <input type="email" placeholder="Enter a valid email address" id="email-3b9a" name="email"
              class="u-border-2 u-border-white u-input u-input-rectangle u-input-1" required="">
          </div>
          <div class="u-align-left u-form-group u-form-submit">
            <a href="#"
              class="u-active-white u-border-2 u-border-white u-btn u-btn-submit u-button-style u-hover-white u-none u-text-active-palette-2-base u-text-body-alt-color u-text-hover-palette-2-base u-btn-4">send</a>
            <input type="submit" value="submit" class="u-form-control-hidden" wfd-invisible="true">
          </div>
          <div class="u-form-send-message u-form-send-success" wfd-invisible="true"> Thank you! Your message has been
            sent. </div>
          <div class="u-form-send-error u-form-send-message" wfd-invisible="true"> Unable to send your message. Please
            fix errors then try again. </div>
          <input type="hidden" value="" name="recaptchaResponse">
          <input type="hidden" name="formServices" value="8cda60ac-2a4d-9fa0-af5c-1c8d87c75a95">
        </form>
      </div>
    </div>
  </section>




  <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-209f">
    <div class="u-clearfix u-sheet u-sheet-1">
      <p class="u-small-text u-text u-text-variant u-text-1">Sample text. Click to select the Text Element.</p>
    </div>
  </footer>
  <section class="u-backlink u-clearfix u-grey-80">
    <a class="u-link" href="https://nicepage.com/website-design" target="_blank">
      <span>Website Design</span>
    </a>
    <p class="u-text">
      <span>created with</span>
    </p>
    <a class="u-link" href="https://nicepage.com/website-builder" target="_blank">
      <span>Website Builder</span>
    </a>.
  </section>



  <script src="config.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    var today = new Date();
    today.setHours(0, 0, 0, 0); // Set the time to the beginning of the day for comparison.


    $(document).ready(function () {
      // Get User Preference
      var eventlen = "";
      var sessionemail = sessionStorage.getItem("email");
      function getUserDetails() {
        $.get(categoryUrls[currentEnvironment]["user"] + "getByEmail2?email=" + sessionemail, function (response) {
          if (response.code === 200) {
            var user_details = response.data[0];
            console.log("EventGoer Details: " + JSON.stringify(user_details));
            sessionStorage.setItem("eventGoerId", user_details.eventGoerId);
            console.log("Event Goer Id: " + sessionStorage.getItem("eventGoerId"));
          } else {
            console.error("Error: " + response.message);
          }
        }).fail(function (jqXHR, textStatus, errorThrown) {
          console.error("Request failed: " + errorThrown);
        });
      }

      function getUserPreference() {
        var eventGoerId = sessionStorage.getItem("eventGoerId");
        $.get(categoryUrls[currentEnvironment]["preference"] + "getPreferenceByEventGoerId?eventGoerId=" + eventGoerId, function (response) {
          if (response.code === 200) {
            var preferences = response.data;
            console.log("Preference: " + JSON.stringify(preferences));
            var InterestArray = preferences.map(function (preference) {
              return preference.categoryId;
            });
            console.log("Category Id: " + JSON.stringify(InterestArray));
          }

          // Call populateFeaturedEvent for each categoryId in InterestArray
          InterestArray.forEach(function (categoryId) {

          });
        });
      }

      // For Each preference, Get Event By Category
      function populateFeaturedEvent(currentPage, eventsPerPage) {
        $.get(categoryUrls[currentEnvironment]["event"] + "getAll", function (response) {
          if (response.code === 200) {
            var events = JSON.parse(JSON.stringify(response.data));
            eventlen = events.length;
            // Create an array to store the extracted venueIds
            var venueIds = [];

            // Loop through each event and extract the venueId
            events.forEach(function (event) {
              if (event.venueId) {
                venueIds.push(event.venueId);
              }
            });

            // Now, the venueIds array contains all the venueIds from the events
            console.log("Venue IDs: " + JSON.stringify(venueIds));

            // Sort events by eventDateTime
            events.sort(function (a, b) {
              return new Date(a.eventDateTime) - new Date(b.eventDateTime);
            });
            console.log(events);
            const featuredEventsContainer = $(".u-repeater-1");

            // Calculate the start and end index for the current page
            const startIndex = (currentPage - 1) * eventsPerPage;
            const endIndex = startIndex + eventsPerPage;

            // Filter events for the current page
            const eventsToShow = events.slice(startIndex, endIndex);

            // Clear the container before adding new cards
            featuredEventsContainer.empty();

            // Loop through the events and create event cards
            //events.forEach(function (event) {
            for (let i = startIndex; i < Math.min(endIndex, events.length); i++) {
              const event = events[i];
              console.log("Event Details for " + i + ":" + JSON.stringify(event));
              var venueId = event.venueId;

              // Call getVenueDetails for each venueId
              getVenueDetails(venueId, function (venue) {
                var eventDate = new Date(event.eventDateTime);
                // Call getMarketingPoster for each eventId
                var eventLink = "View-Event.html?eventId=" + event.eventId + "&venueId=" + venueId + "&categoryId=" + event.categoryId;
                console.log(eventLink);
                const imageUrl = "https://firebasestorage.googleapis.com/v0/b/fyp2023-s3-03.appspot.com/o/events%2F" + event.img + "?alt=media";
                // Check if the event is upcoming or current
                if (eventDate > today) {
                  // Event is upcoming
                  const eventCard = `
                    
                                    <div class="u-container-style u-list-item u-repeater-item">
                                      <div class="u-container-layout u-similar-container u-container-layout-${i + 1}">
                                        <img src="${imageUrl}" alt="${event.eventName}" class="u-image u-image-default u-preserve-proportions u-image-1" data-image-width="626" data-image-height="626">
                                        <h2 class="u-text u-text-2">${event.eventName}</h2>
                                        <h5 class="u-custom-font u-font-pt-sans u-text u-text-3">${event.eventDateTime}</h5>
                                        <a href="${eventLink}" class="u-active-white u-border-none u-btn u-button-style u-hover-white u-palette-1-base u-text-active-palette-5-dark-3 u-text-body-alt-color u-text-hover-palette-5-dark-3 u-btn-1">more</a>
                                      </div>
                                    </div>
                                    `;

                  featuredEventsContainer.append(eventCard);
                } else {
                  // Event is current
                  const eventCard = `
                    
                                        <div class="u-container-style u-list-item u-repeater-item">
                                      <div class="u-container-layout u-similar-container u-container-layout-${i + 1}">
                                        <img src="${imageUrl}" alt="${event.eventName}" class="u-image u-image-default u-preserve-proportions u-image-1" data-image-width="626" data-image-height="626">
                                        <h2 class="u-text u-text-2">${event.eventName}</h2>
                                        <h5 class="u-custom-font u-font-pt-sans u-text u-text-3">${event.eventDateTime}</h5>
                                        <a href="${eventLink}" class="u-active-white u-border-none u-btn u-button-style u-hover-white u-palette-1-base u-text-active-palette-5-dark-3 u-text-body-alt-color u-text-hover-palette-5-dark-3 u-btn-1">more</a>
                                      </div>
                                    </div>
                                    `;
                  // Append to a different container for current events
                  // You can create a separate container for current events in your HTML.
                  featuredEventsContainer.append(eventCard);
                }

              });
            };
          } else {
            console.error("Failed to retrieve event data.");
          }
        });
      }


      // Function to handle page navigation
      function navigateToPage(page) {
        if (page >= 1 && page <= Math.ceil(eventlen / eventsPerPage)) {
          currentPage = page;
          populateFeaturedEvent(currentPage, eventsPerPage);
        }
      }

      // Example: You can add click event handlers for next and previous buttons
      $("#nextPageButton").on("click", function () {
        navigateToPage(currentPage + 1);
        $("#prevPageButton").prop("disabled", false);
        $("#currentPage").text("Page " + currentPage);
      });

      $("#prevPageButton").on("click", function () {
        navigateToPage(currentPage - 1);
        $("#currentPage").text("Page " + currentPage);
      });

      // Current page (initially set to 1)
      let currentPage = 1;
      // Number of events per page
      const eventsPerPage = 5;


      // For each event, get venue details using Venue Id
      function getVenueDetails(venueId, callback) {
        $.get(categoryUrls[currentEnvironment]["venue"] + "getVenueById?venueId=" + venueId, function (response) {
          if (response.code === 200) {
            var venue = response.data[0];
            console.log("Venue details: " + JSON.stringify(venue));
            console.log("Venue Name: " + venue.venueName);
            // Call the callback function with the venue data
            callback(venue);
          }
        });
      }

      function getMarketingPoster(eventId, callback) {
        $.get(categoryUrls[currentEnvironment]["marketing"] + "getAllMarketingByEventId?eventId=" + eventId, function (response) {
          if (response.code === 200) {
            var marketingData = response.data[0];
            console.log("Marketing data: " + JSON.stringify(marketingData));

            if (marketingData) {
              console.log("Marketing Poster Found!: " + marketingData.img);
              // Call the callback function with the marketing data
              callback(marketingData);
            } else {
              // If marketingData is null, provide pseudo data or defaults
              var defaultMarketingData = {
                img: "default.jpg",
                someProperty: "Default Value"
              };
              console.log("Marketing Poster Not Found. Using default data.");
              callback(defaultMarketingData);
            }
          } else if (response.code === 404) {
            // Handle 404 (NOT FOUND) error here
            console.error("Resource not found. Handling 404 error...");

            // You can provide default data or take any other appropriate action
            var defaultMarketingData = {
              img: "default.jpg",
              someProperty: "Default Value"
            };
            callback(defaultMarketingData);
          } else {
            // Handle other errors here
            console.error("An error occurred:", response);
          }
        })
      }

      // Function to filter and display events based on the search input
  function searchEvents() {
    const searchInput = document.querySelector('#search-input').value.toLowerCase();
    const eventCards = document.querySelectorAll('.u-repeater-item');

    eventCards.forEach(eventCard => {
      const eventName = eventCard.querySelector('.u-text-2').textContent.toLowerCase();
      if (eventName.includes(searchInput)) {
        eventCard.style.display = 'block';
      } else {
        eventCard.style.display = 'none';
      }
    });
  }

  // Event listener for the search input field
  const searchInputField = document.querySelector('#search-input');
  searchInputField.addEventListener('input', searchEvents);

  // Function to search events on all pages
  function searchEventsOnAllPages() {
  const allPages = Math.ceil(eventlen / eventsPerPage);
  for (let page = 1; page <= allPages; page++) {
    const eventCards = document.querySelectorAll(`.event-block`); // Use the class or data attribute you added
    eventCards.forEach(eventCard => {
      const eventName = eventCard.querySelector('.u-text-2').textContent.toLowerCase();
      if (eventName.includes(searchInputField.value.toLowerCase())) {
        eventCard.style.display = 'block';
      } else {
        eventCard.style.display = 'none';
      }
    });
  }
}

// Event listener for searching events on all pages
searchInputField.addEventListener('input', searchEventsOnAllPages);



      getUserDetails();
      populateFeaturedEvent(currentPage, eventsPerPage);
    });

  </script>
</body>

</html>